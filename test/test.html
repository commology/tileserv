<html>
<head>
<meta charset='utf-8' />
<meta http-equiv='X-UA-Compatible' content='IE=edge' >
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' />
<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css"
  integrity="sha512-07I2e+7D8p6he1SIM+1twR5TIrhUQn9+I6yjqD53JQjFiMf8EtC93ty0/5vJTZGF8aAocvHYNEDJajGdNx1IsQ=="
  crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"
  integrity="sha512-A7vV8IFfih/D732iSSKi20u/ooOfj/AGehOKq0f4vLT1Zr2Y+RX7C+w8A1gaSasGtRUZpF/NZgzSAu4/Gc41Lg=="
  crossorigin=""></script>
<!--
<script src="http://api.map.baidu.com/api?v=2.0&ak=sLlOHXz6Ge7fGtRp8In6GXZQONASMGjB&s=1" type="text/javascript"></script>
<script src="baidu.js" type="text/javascript"></script>
-->
<script src="https://api.map.baidu.com/getscript?v=2.0&ak=sLlOHXz6Ge7fGtRp8In6GXZQONASMGjB&services=&t=20170511202040"></script>
<script src="leaflet.Graticule.js" type="text/javascript"></script>
<script src="leaflet.BaiduLayer.js" type="text/javascript"></script>
<script src="leaflet.TencentLayer.js" type="text/javascript"></script>
<script src="leaflet.ChineseWmtsProviders.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.4.3/proj4.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/proj4leaflet/1.0.1/proj4leaflet.js" type="text/javascript"></script>
<style type="text/css">
html,body,#map {
  width: 100%;
  height: 100%;
  overflow: hidden;
}
body {
  padding: 0;
  margin: 0;
}
<title>Yet Another Map ...</title>
<link rel='icon' href='/IoT/favicon.ico' type='image/x-icon' />
<link rel='shortcut icon' href='/IoT/favicon.ico' type='image/x-icon' />
</style>
</head>
<body>
<div id="map"></div>
<script>
var osmUrl = 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
var osmLayer = L.tileLayer(osmUrl, {
    id: 'osm',
    maxZoom: 17,
    detectRetina: true,
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>'
});

var gmapStr = 'Google.Normal.Map';
var gmapLayer = L.tileLayer.chinaProvider(gmapStr, {
    id: 'gmap',
    maxZoom: 18,
    detectRetina: true,
    attribution: '&copy; <a href="https://www.google.cn/maps/">Google</a>'
});

var amapStr = 'GaoDe.Normal.Map';
var amapLayer = L.tileLayer.chinaProvider(amapStr, {
    id: 'amap',
    maxZoom: 18,
    detectRetina: true,
    attribution: '&copy; <a href="http://lbs.amap.com/home/terms/">高德地图 AMap(AutoNavi)</a> - GS(2016)710'
});

var bmapStr = 'Baidu.Normal.Map';
var bmapLayer = L.tileLayer.chinaProvider(bmapStr, {
    id: 'bmap',
    minZoom: 3,
    maxZoom: 19,
    detectRetina: true,
    attribution: '&copy; <a href="http://lbsyun.baidu.com/index.php?title=open/law">Baidu</a> - GS(2016)2089; Data &copy; 长地万方'
});

var qmapStr = 'Tencent.Normal.Map';
var qmapLayer = L.tileLayer.chinaProvider(qmapStr, {
    id: 'qmap',
    minZoom: 3,
    maxZoom: 19,
    detectRetina: true,
    attribution: '&copy; <a href="http://lbs.qq.com/terms.html">Tencent</a> - GS(2016)930; Data &copy; NavInfo'
});

var nmapUrl = 'http://basemap.nationalmap.gov/arcgis/rest/services/USGSTopo/MapServer/tile/{z}/{y}/{x}';
var nmapLayer = L.tileLayer(nmapUrl, {
    id: 'nmap',
    minZoom: 1,
    maxZoom: 19,
    attribution: '&copy; <a href="http://basemap.nationalmap.gov/arcgis/rest/services/USGSTopo/MapServer" target="_blank">USGS</a> Elevation'
});

var admin1Url = 'http://127.0.0.1:8111/admin_1/{z}/{x}/{y}/tile.png';
//var admin1Url = 'http://tiles.commology.com/v1/admin_1/{z}/{x}/{y}/tile.png';
var admin1Layer = L.tileLayer(admin1Url, {
    id: 'admin_1_provinces',
    maxZoom: 25,
    detectRetina: true,
    attribution: ''
});

var admin0Url = 'http://127.0.0.1:8111/admin_0/{z}/{x}/{y}/tile.png';
//var admin0Url = 'http://tiles.commology.com/v1/admin_0/{z}/{x}/{y}/tile.png';
var admin0Layer = L.tileLayer(admin0Url, {
    id: 'admin_0_countries',
    maxZoom: 25,
    detectRetina: true,
    attribution: ''
});

function addGibsLayer(imageryLayer, format) {

format = format || 'png';

//var gibsUrl = "http://map1{s}.vis.earthdata.nasa.gov/wmts-webmerc/{imageryLayer}/default/{time}/{tileMatrixSet}/{z}/{y}/{x}.jpg";
var gibsUrl = "http://gibs.earthdata.nasa.gov/wmts/epsg3857/best/{imageryLayer}/default/{time}/{tileMatrixSet}/{z}/{y}/{x}.{format}";
var gibsLayer = L.tileLayer(gibsUrl, {
    id: 'gibs_' + imageryLayer,
    imageryLayer: imageryLayer,
    tileMatrixSet: "GoogleMapsCompatible_Level9",
    maxZoom: 9,
    time: "2017-05-18",
    tileSize: 256,
    format: format,
    subdomains: "abc",
    noWrap: true,
    continuousWorld: true,
    // Prevent Leaflet from retrieving non-existent tiles on the
    // borders.
    bounds: [
        [-85.0511287776, -179.999999975],
        [85.0511287776, 179.999999975]
    ],
    attribution:
        "<a href='https://wiki.earthdata.nasa.gov/display/GIBS'>" +
        "NASA EOSDIS GIBS" +
        "</a>"
});
return gibsLayer;

}

var gibsTerraTrueColorLayer = addGibsLayer('MODIS_Terra_CorrectedReflectance_TrueColor', 'jpg');
var gibsAquaTrueColorLayer  = addGibsLayer('MODIS_Aqua_CorrectedReflectance_TrueColor', 'jpg');

function addSsecLayer(productName) {

var ssecUrl = 'http://wms.ssec.wisc.edu/tiles/{product}/{z}/{x}/{y}.png';
var ssecLayer = L.tileLayer(ssecUrl, {
    id: 'ssec_' + productName,
    maxZoom: 25,
    opacity: 0.5,
    product: productName,
    detectRetina: true,
    attribution: "<a href='http://wms.ssec.wis.edu/doc/dataaccess.php'>SSEC</a> WISC."
});
return ssecLayer;

}

ssecNppTcLayer = addSsecLayer('GLOBALnpptc');

ssecH8B01Layer = addSsecLayer('HIMAWARI-B01');
ssecH8B02Layer = addSsecLayer('HIMAWARI-B02');
ssecH8B03Layer = addSsecLayer('HIMAWARI-B03');
ssecH8B08Layer = addSsecLayer('HIMAWARI-B08');
ssecH8B10Layer = addSsecLayer('HIMAWARI-B10');
ssecH8B13Layer = addSsecLayer('HIMAWARI-B13');


var neUrl = 'http://tiles.commology.com/v1/naturalearth/{z}/{x}/{y}/tile.png';
var neLayer = L.tileLayer(neUrl, {
    id: 'ne',
    maxZoom: 25,
    detectRetina: true,
    attribution: '&#x269D; Tiles by FynnBear; Data - NaturalEarthI'
});

var t2mUrl = 'http://127.0.0.1:8111/t2m/{z}/{x}/{y}/tile.png';
//var t2mUrl = 'http://tiles.commology.com/v1/t2m/{z}/{x}/{y}/tile.png';
var t2mLayer = L.tileLayer(t2mUrl, {
    id: 't2m',
    tileSize: 256,
    maxZoom: 25,
    detectRetina: true,
    attribution: '&#x269D; Tiles by FynnBear; Data - ECMWF forecast'
});

var graticuleLayer = L.latlngGraticule({
    zoomInterval: [
        {start: 2, end: 3, interval: 30},
        {start: 4, end: 4, interval: 10},
        {start: 5, end: 7, interval: 5},
        {start: 8, end: 10, interval: 1}
    ],
    showLabel: true
});


var baseMaps = {
    "None" : L.tileLayer(''),
    "OpenStreetMap": osmLayer,
    "Google Maps": gmapLayer,
    "GaoDe Map": amapLayer,
    "QQ Map": qmapLayer,
    "<strike>Baidu Map</strike>": bmapLayer
};

var overlayMaps = {
    "USGS Elev.": nmapLayer,
    "Natural Earth I": neLayer,
    "Terra TrueColor": gibsTerraTrueColorLayer,
    "Aqua TrueColor": gibsAquaTrueColorLayer,
    "NPP TrueColor": ssecNppTcLayer,
    "Himawari-8 B01": ssecH8B01Layer,
    "Himawari-8 B02": ssecH8B02Layer,
    "Himawari-8 B03": ssecH8B03Layer,
    "Himawari-8 B08": ssecH8B08Layer,
    "Himawari-8 B10": ssecH8B10Layer,
    "Himawari-8 B13": ssecH8B13Layer,
    "ECMWF 2m temperature": t2mLayer,
    "Provinces": admin1Layer,
    "Countries": admin0Layer,
    "Graticule": graticuleLayer
};


var init_lat = 39.94942;
var init_lng = 116.32838;

var map = new L.Map('map', {
    center: [init_lat, init_lng],
    zoom: 5
});

// add one of basemap layers before overlay layers, 
// in order to make every basemap attribution after overlay attribution
t2mLayer.addTo(map);
amapLayer.addTo(map);
graticuleLayer.addTo(map);

// ControlLayer must be initialized after map layers
var layerCtrl = L.control.layers(baseMaps, overlayMaps);
layerCtrl.addTo(map);


map.setView(new L.LatLng(init_lat, init_lng), 4);

var marker = L.marker([init_lat, init_lng]);

marker.addTo(map);

marker.bindPopup("<b>Hello you!</b><br>I'm from Beijing.");

function onMapClick(e) {
  alert("You clicked the map at " + e.latlng);
}

map.on('click', onMapClick);

</script>
</body>
</html>
